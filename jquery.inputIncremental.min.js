/*global jQuery*//* jquery.inputIncremental
 *
 * Version 0.0.1 by Florent Detry
 *
 * Extends jQuery <http://jquery.com>
 *
 */$.fn.inputIncremental=function(e){return this.each(function(){var t=$(this);t.wrap('<span class="inputIncremental"/>');var n=t.parent();n.append($("<div />").addClass("incrementalButtonBox").append($('<a href="#"/>').addClass("increment")).append($('<a href="#"/>').addClass("decrement")));var r={value:1,minVal:0,maxVal:null,throttle:1e3,autocomplete:!1},i=$.extend(r,e),s=t.data();s.minval!=undefined&&(i.minVal=s.minval);s.throttle!=undefined&&(i.throttle=s.throttle);s.theme!=undefined&&n.addClass(s.theme);i.autocomplete||t.attr("autocomplete","off");var o=function(e,t){var n=$(e),r=n.data("inputIncremental-throttle");if(!r){r=$.throttle(i.throttle,function(e){n.trigger("change")});n.data("inputIncremental-throttle",r)}t<i.minVal&&(t=i.minVal);i.maxVal&&t>i.maxVal&&(t=i.maxVal);n.val(t);r(t)};t.on("keypress",function(e){(e.which<48||e.which>57)&&e.which!=8&&e.which!=0&&e.which!=44&&e.which!=46&&e.preventDefault();o(this,$(this).val().replace(",","."))});t.on("keydown",function(e){var t=function(e){e.addClass("hover").trigger("click");setTimeout(function(){e.removeClass("hover")},200)};e.which==38?t($(this).parent().find("a.increment")):e.which==40?t($(this).parent().find("a.decrement")):e.keyCode==9});n.on("click","a",function(e){e.preventDefault();if(n.is(".disabled"))return;var t=n.find("input"),r=t.val();i.numberType=="int"?r=parseInt(t.val()):r=parseFloat(t.val());isNaN(r)&&(r=i.minVal);$(this).hasClass("increment")?r+=i.value:$(this).hasClass("decrement")&&(r-=i.value);o(t,Math.round(r*100)/100);t.focus()});t.on("focus",function(e){n.addClass("focus");setTimeout($.proxy(function(){this.select()},t),10)}).on("blur",function(e){n.removeClass("focus");var t=$(this),r=parseInt(t.val());(isNaN(r)||t.val()==""||r<i.minVal)&&o(t,i.minVal)})})};